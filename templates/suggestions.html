{% extends "base.html" %}
{% block content %}

<div class="card suggestions-card">
  <h2>üí° Smart Value Suggestions</h2>
  <p class="muted">Top matching suggestions (same city, same BHK, within 6 km, size 70%‚Äì130%).</p>

  <div style="display:flex; align-items:center; gap:18px; margin-bottom:12px;">
    {% if predicted_from_q %}
      <div><strong>Predicted Rent:</strong> ‚Çπ{{ predicted_from_q }}</div>
    {% endif %}
</div>


  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th>Locality</th>
          <th>BHK</th>
          <th>Size</th>
          <th>Bath</th>
          <th>Rent</th>
          <th>Fair Rent</th>
          <th>Value</th>
          <th>Dist (km)</th>
        </tr>
      </thead>
      <tbody>
        {% if suggestions %}
          {% for s in suggestions %}
          <tr {% if loop.index0 == 0 %} class="highlight" {% endif %}>
            <td>{{ s.locality }}</td>
            <td>{{ s.bhk }}</td>
            <td>{{ s.size_sqft }}</td>
            <td>{{ s.bathrooms }}</td>
            <td>‚Çπ{{ "{:,}".format(s.rent) }}</td>
            <td>‚Çπ{{ "{:,}".format(s.pred_rent) }}</td>
            <td>{{ s.value_score }}</td>
            <td>{{ s.distance_km if s.distance_km is not none else "‚Äî" }}</td>
          </tr>
          {% endfor %}
        {% else %}
          <tr><td colspan="8">No suggestions found. Try changing search parameters.</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>

<div class="card map-card" style="margin-top:18px;">
  <h2>üó∫Ô∏è Map ‚Äî Suggested Areas</h2>
  <div class="map-wrapper">
    {{ map_html | safe }}
  </div>
</div>

{% endblock %}
